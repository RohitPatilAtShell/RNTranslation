import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";var _jsxFileName="/Users/satya/Workspace/Projects/navigation-ex/packages/bottom-tabs/src/views/BottomTabBar.tsx";import React from'react';import{View,Animated,StyleSheet,Keyboard,Platform,Dimensions}from'react-native';import{NavigationContext}from'@react-navigation/core';import{SafeAreaConsumer}from'react-native-safe-area-context';import TabBarIcon from'./TabBarIcon';var DEFAULT_TABBAR_HEIGHT=50;var DEFAULT_MAX_TAB_ITEM_WIDTH=125;var TabBarBottom=function(_React$Component){_inherits(TabBarBottom,_React$Component);function TabBarBottom(){var _getPrototypeOf2;var _this;_classCallCheck(this,TabBarBottom);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TabBarBottom)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={dimensions:Dimensions.get('window'),layout:{height:0,width:0},keyboard:false,visible:new Animated.Value(1)};_this.handleOrientationChange=function(_ref){var window=_ref.window;_this.setState({dimensions:window});};_this.handleKeyboardShow=function(){return _this.setState({keyboard:true},function(){return Animated.timing(_this.state.visible,{toValue:0,duration:200,useNativeDriver:true}).start();});};_this.handleKeyboardHide=function(){return Animated.timing(_this.state.visible,{toValue:1,duration:250,useNativeDriver:true}).start(function(_ref2){var finished=_ref2.finished;if(finished){_this.setState({keyboard:false});}});};_this.handleLayout=function(e){var layout=_this.state.layout;var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;if(height===layout.height&&width===layout.width){return;}_this.setState({layout:{height:height,width:width}});};_this.renderLabel=function(_ref3){var route=_ref3.route,focused=_ref3.focused;var _this$props=_this.props,activeTintColor=_this$props.activeTintColor,inactiveTintColor=_this$props.inactiveTintColor,labelStyle=_this$props.labelStyle,showLabel=_this$props.showLabel,showIcon=_this$props.showIcon,allowFontScaling=_this$props.allowFontScaling;if(showLabel===false){return null;}var label=_this.props.getLabelText({route:route});var horizontal=_this.shouldUseHorizontalLabels();var color=focused?activeTintColor:inactiveTintColor;if(typeof label==='string'){return React.createElement(Animated.Text,{numberOfLines:1,style:[styles.label,{color:color},showIcon&&horizontal?styles.labelBeside:styles.labelBeneath,labelStyle],allowFontScaling:allowFontScaling,__source:{fileName:_jsxFileName,lineNumber:143}},label);}if(typeof label==='string'){return label;}return label({focused:focused,color:color});};_this.renderIcon=function(_ref4){var route=_ref4.route,focused=_ref4.focused;var _this$props2=_this.props,activeTintColor=_this$props2.activeTintColor,inactiveTintColor=_this$props2.inactiveTintColor,renderIcon=_this$props2.renderIcon,showIcon=_this$props2.showIcon;if(showIcon===false){return null;}var horizontal=_this.shouldUseHorizontalLabels();var activeOpacity=focused?1:0;var inactiveOpacity=focused?0:1;return React.createElement(TabBarIcon,{route:route,size:horizontal?17:24,activeOpacity:activeOpacity,inactiveOpacity:inactiveOpacity,activeTintColor:activeTintColor,inactiveTintColor:inactiveTintColor,renderIcon:renderIcon,style:horizontal?styles.iconHorizontal:styles.iconVertical,__source:{fileName:_jsxFileName,lineNumber:189}});};_this.shouldUseHorizontalLabels=function(){var _this$props3=_this.props,state=_this$props3.state,adaptive=_this$props3.adaptive,tabStyle=_this$props3.tabStyle,labelPosition=_this$props3.labelPosition;var dimensions=_this.state.dimensions;var routes=state.routes;var isLandscape=dimensions.width>dimensions.height;if(labelPosition){var position;if(typeof labelPosition==='string'){position=labelPosition;}else{position=labelPosition({dimensions:dimensions});}if(position){return position==='beside-icon';}}if(!adaptive){return false;}if(dimensions.width>=768){var maxTabItemWidth=DEFAULT_MAX_TAB_ITEM_WIDTH;var flattenedStyle=StyleSheet.flatten(tabStyle);if(flattenedStyle){if(typeof flattenedStyle.width==='number'){maxTabItemWidth=flattenedStyle.width;}else if(typeof flattenedStyle.maxWidth==='number'){maxTabItemWidth=flattenedStyle.maxWidth;}}return routes.length*maxTabItemWidth<=dimensions.width;}else{return isLandscape;}};return _this;}_createClass(TabBarBottom,[{key:"componentDidMount",value:function componentDidMount(){Dimensions.addEventListener('change',this.handleOrientationChange);if(Platform.OS==='ios'){Keyboard.addListener('keyboardWillShow',this.handleKeyboardShow);Keyboard.addListener('keyboardWillHide',this.handleKeyboardHide);}else{Keyboard.addListener('keyboardDidShow',this.handleKeyboardShow);Keyboard.addListener('keyboardDidHide',this.handleKeyboardHide);}}},{key:"componentWillUnmount",value:function componentWillUnmount(){Dimensions.removeEventListener('change',this.handleOrientationChange);if(Platform.OS==='ios'){Keyboard.removeListener('keyboardWillShow',this.handleKeyboardShow);Keyboard.removeListener('keyboardWillHide',this.handleKeyboardHide);}else{Keyboard.removeListener('keyboardDidShow',this.handleKeyboardShow);Keyboard.removeListener('keyboardDidHide',this.handleKeyboardHide);}}},{key:"render",value:function render(){var _this2=this;var _this$props4=this.props,state=_this$props4.state,descriptors=_this$props4.descriptors,keyboardHidesTabBar=_this$props4.keyboardHidesTabBar,activeBackgroundColor=_this$props4.activeBackgroundColor,inactiveBackgroundColor=_this$props4.inactiveBackgroundColor,onTabPress=_this$props4.onTabPress,onTabLongPress=_this$props4.onTabLongPress,getAccessibilityLabel=_this$props4.getAccessibilityLabel,getAccessibilityRole=_this$props4.getAccessibilityRole,getAccessibilityStates=_this$props4.getAccessibilityStates,renderButton=_this$props4.renderButton,getTestID=_this$props4.getTestID,style=_this$props4.style,tabStyle=_this$props4.tabStyle;var routes=state.routes;return React.createElement(SafeAreaConsumer,{__source:{fileName:_jsxFileName,lineNumber:266}},function(insets){return React.createElement(Animated.View,{style:[styles.tabBar,keyboardHidesTabBar?{transform:[{translateY:_this2.state.visible.interpolate({inputRange:[0,1],outputRange:[_this2.state.layout.height,0]})}],position:_this2.state.keyboard?'absolute':null}:null,{height:DEFAULT_TABBAR_HEIGHT+(insets?insets.bottom:0),paddingBottom:insets?insets.bottom:0},style],pointerEvents:keyboardHidesTabBar&&_this2.state.keyboard?'none':'auto',__source:{fileName:_jsxFileName,lineNumber:268}},React.createElement(View,{style:styles.content,onLayout:_this2.handleLayout,__source:{fileName:_jsxFileName,lineNumber:297}},routes.map(function(route,index){var focused=index===state.index;var scene={route:route,focused:focused};var accessibilityLabel=getAccessibilityLabel({route:route});var accessibilityRole=getAccessibilityRole({route:route});var accessibilityStates=getAccessibilityStates(scene);var testID=getTestID({route:route});var backgroundColor=focused?activeBackgroundColor:inactiveBackgroundColor;return React.createElement(NavigationContext.Provider,{key:route.key,value:descriptors[route.key].navigation,__source:{fileName:_jsxFileName,lineNumber:318}},renderButton({route:route,onPress:function onPress(){return onTabPress({route:route});},onLongPress:function onLongPress(){return onTabLongPress({route:route});},testID:testID,accessibilityLabel:accessibilityLabel,accessibilityRole:accessibilityRole,accessibilityStates:accessibilityStates,style:[styles.tab,{backgroundColor:backgroundColor},_this2.shouldUseHorizontalLabels()?styles.tabLandscape:styles.tabPortrait,tabStyle],children:React.createElement(React.Fragment,{__source:{fileName:_jsxFileName,lineNumber:339}},_this2.renderIcon(scene),_this2.renderLabel(scene))}));})));});}}]);return TabBarBottom;}(React.Component);TabBarBottom.defaultProps={keyboardHidesTabBar:false,activeTintColor:'#007AFF',activeBackgroundColor:'transparent',inactiveTintColor:'#8E8E93',inactiveBackgroundColor:'transparent',showLabel:true,showIcon:true,allowFontScaling:true,adaptive:true};export{TabBarBottom as default};var styles=StyleSheet.create({tabBar:{left:0,right:0,bottom:0,backgroundColor:'#fff',borderTopWidth:StyleSheet.hairlineWidth,borderTopColor:'rgba(0, 0, 0, .3)',elevation:8},content:{flex:1,flexDirection:'row'},tab:{flex:1,alignItems:'center'},tabPortrait:{justifyContent:'flex-end',flexDirection:'column'},tabLandscape:{justifyContent:'center',flexDirection:'row'},iconVertical:{flex:1},iconHorizontal:{height:'100%'},label:{textAlign:'center',backgroundColor:'transparent'},labelBeneath:{fontSize:11,marginBottom:1.5},labelBeside:{fontSize:12,marginLeft:20}});
//# sourceMappingURL=BottomTabBar.js.map