import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _extends from"@babel/runtime/helpers/extends";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";var _jsxFileName="/Users/satya/Workspace/Projects/navigation-ex/packages/bottom-tabs/src/views/BottomTabView.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import{View,TouchableWithoutFeedback,StyleSheet}from'react-native';import{CommonActions}from'@react-navigation/core';import{ScreenContainer}from'react-native-screens';import SafeAreaProviderCompat from'./SafeAreaProviderCompat';import ResourceSavingScene from'./ResourceSavingScene';import BottomTabBar from'./BottomTabBar';var BottomTabView=function(_React$Component){_inherits(BottomTabView,_React$Component);function BottomTabView(){var _getPrototypeOf2;var _this;_classCallCheck(this,BottomTabView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BottomTabView)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loaded:[_this.props.state.index]};_this.renderButton=function(_ref){var route=_ref.route,children=_ref.children,style=_ref.style,rest=_objectWithoutProperties(_ref,["route","children","style"]);var descriptors=_this.props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarButton){return options.tabBarButton(_objectSpread({children:children,style:style},rest));}return React.createElement(TouchableWithoutFeedback,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:71}}),React.createElement(View,{style:style,__source:{fileName:_jsxFileName,lineNumber:72}},children));};_this.renderIcon=function(_ref2){var route=_ref2.route,focused=_ref2.focused,color=_ref2.color,size=_ref2.size;var descriptors=_this.props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarIcon){return typeof options.tabBarIcon==='string'?options.tabBarIcon:options.tabBarIcon({focused:focused,color:color,size:size});}return null;};_this.getLabelText=function(_ref3){var route=_ref3.route;var descriptors=_this.props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarLabel!==undefined){return options.tabBarLabel;}if(typeof options.title==='string'){return options.title;}return route.name;};_this.getAccessibilityLabel=function(_ref4){var route=_ref4.route;var _this$props=_this.props,state=_this$props.state,descriptors=_this$props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(typeof options.tabBarAccessibilityLabel!=='undefined'){return options.tabBarAccessibilityLabel;}var label=_this.getLabelText({route:route});if(typeof label==='string'){return label+", tab, "+(state.routes.indexOf(route)+1)+" of "+state.routes.length;}return undefined;};_this.getAccessibilityRole=function(){return'button';};_this.getAccessibilityStates=function(_ref5){var focused=_ref5.focused;return focused?['selected']:[];};_this.getTestID=function(_ref6){var route=_ref6.route;return _this.props.descriptors[route.key].options.tabBarTestID;};_this.handleTabPress=function(_ref7){var route=_ref7.route;var _this$props2=_this.props,state=_this$props2.state,navigation=_this$props2.navigation;var event=_this.props.navigation.emit({type:'tabPress',target:route.key});if(state.routes[state.index].key!==route.key&&!event.defaultPrevented){navigation.dispatch(_objectSpread({},CommonActions.navigate(route.name),{target:state.key}));}};_this.handleTabLongPress=function(_ref8){var route=_ref8.route;_this.props.navigation.emit({type:'tabLongPress',target:route.key});};_this.renderTabBar=function(){var _this$props3=_this.props,_this$props3$tabBar=_this$props3.tabBar,tabBar=_this$props3$tabBar===void 0?function(props){return React.createElement(BottomTabBar,_extends({},props,{__source:{fileName:_jsxFileName,lineNumber:175}}));}:_this$props3$tabBar,tabBarOptions=_this$props3.tabBarOptions,state=_this$props3.state,navigation=_this$props3.navigation;var descriptors=_this.props.descriptors;var route=state.routes[state.index];var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarVisible===false){return null;}return tabBar(_objectSpread({},tabBarOptions,{state:state,descriptors:descriptors,navigation:navigation,onTabPress:_this.handleTabPress,onTabLongPress:_this.handleTabLongPress,getLabelText:_this.getLabelText,getAccessibilityLabel:_this.getAccessibilityLabel,getAccessibilityRole:_this.getAccessibilityRole,getAccessibilityStates:_this.getAccessibilityStates,getTestID:_this.getTestID,renderButton:_this.renderButton,renderIcon:_this.renderIcon}));};return _this;}_createClass(BottomTabView,[{key:"render",value:function render(){var _this$props4=this.props,state=_this$props4.state,descriptors=_this$props4.descriptors,lazy=_this$props4.lazy,unmountInactiveScreens=_this$props4.unmountInactiveScreens;var routes=state.routes;var loaded=this.state.loaded;return React.createElement(SafeAreaProviderCompat,{__source:{fileName:_jsxFileName,lineNumber:213}},React.createElement(View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:214}},React.createElement(ScreenContainer,{style:styles.pages,__source:{fileName:_jsxFileName,lineNumber:215}},routes.map(function(route,index){if(unmountInactiveScreens&&index!==state.index){return null;}if(lazy&&!loaded.includes(index)){return null;}var isFocused=state.index===index;return React.createElement(ResourceSavingScene,{key:route.key,style:StyleSheet.absoluteFill,isVisible:isFocused,__source:{fileName:_jsxFileName,lineNumber:229}},React.createElement(View,{accessibilityElementsHidden:!isFocused,importantForAccessibility:isFocused?'auto':'no-hide-descendants',style:styles.content,__source:{fileName:_jsxFileName,lineNumber:234}},descriptors[route.key].render()));})),this.renderTabBar()));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var index=nextProps.state.index;return{loaded:prevState.loaded.includes(index)?prevState.loaded:[].concat(_toConsumableArray(prevState.loaded),[index])};}}]);return BottomTabView;}(React.Component);BottomTabView.defaultProps={lazy:true};export{BottomTabView as default};var styles=StyleSheet.create({container:{flex:1,overflow:'hidden'},pages:{flex:1},content:{flex:1}});
//# sourceMappingURL=BottomTabView.js.map