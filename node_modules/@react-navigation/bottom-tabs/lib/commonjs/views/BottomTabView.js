var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _core=require("@react-navigation/core");var _reactNativeScreens=require("react-native-screens");var _SafeAreaProviderCompat=_interopRequireDefault(require("./SafeAreaProviderCompat"));var _ResourceSavingScene=_interopRequireDefault(require("./ResourceSavingScene"));var _BottomTabBar=_interopRequireDefault(require("./BottomTabBar"));var _jsxFileName="/Users/satya/Workspace/Projects/navigation-ex/packages/bottom-tabs/src/views/BottomTabView.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var BottomTabView=function(_React$Component){(0,_inherits2.default)(BottomTabView,_React$Component);function BottomTabView(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,BottomTabView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(BottomTabView)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loaded:[_this.props.state.index]};_this.renderButton=function(_ref){var route=_ref.route,children=_ref.children,style=_ref.style,rest=(0,_objectWithoutProperties2.default)(_ref,["route","children","style"]);var descriptors=_this.props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarButton){return options.tabBarButton(_objectSpread({children:children,style:style},rest));}return React.createElement(_reactNative.TouchableWithoutFeedback,(0,_extends2.default)({},rest,{__source:{fileName:_jsxFileName,lineNumber:71}}),React.createElement(_reactNative.View,{style:style,__source:{fileName:_jsxFileName,lineNumber:72}},children));};_this.renderIcon=function(_ref2){var route=_ref2.route,focused=_ref2.focused,color=_ref2.color,size=_ref2.size;var descriptors=_this.props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarIcon){return typeof options.tabBarIcon==='string'?options.tabBarIcon:options.tabBarIcon({focused:focused,color:color,size:size});}return null;};_this.getLabelText=function(_ref3){var route=_ref3.route;var descriptors=_this.props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarLabel!==undefined){return options.tabBarLabel;}if(typeof options.title==='string'){return options.title;}return route.name;};_this.getAccessibilityLabel=function(_ref4){var route=_ref4.route;var _this$props=_this.props,state=_this$props.state,descriptors=_this$props.descriptors;var descriptor=descriptors[route.key];var options=descriptor.options;if(typeof options.tabBarAccessibilityLabel!=='undefined'){return options.tabBarAccessibilityLabel;}var label=_this.getLabelText({route:route});if(typeof label==='string'){return label+", tab, "+(state.routes.indexOf(route)+1)+" of "+state.routes.length;}return undefined;};_this.getAccessibilityRole=function(){return'button';};_this.getAccessibilityStates=function(_ref5){var focused=_ref5.focused;return focused?['selected']:[];};_this.getTestID=function(_ref6){var route=_ref6.route;return _this.props.descriptors[route.key].options.tabBarTestID;};_this.handleTabPress=function(_ref7){var route=_ref7.route;var _this$props2=_this.props,state=_this$props2.state,navigation=_this$props2.navigation;var event=_this.props.navigation.emit({type:'tabPress',target:route.key});if(state.routes[state.index].key!==route.key&&!event.defaultPrevented){navigation.dispatch(_objectSpread({},_core.CommonActions.navigate(route.name),{target:state.key}));}};_this.handleTabLongPress=function(_ref8){var route=_ref8.route;_this.props.navigation.emit({type:'tabLongPress',target:route.key});};_this.renderTabBar=function(){var _this$props3=_this.props,_this$props3$tabBar=_this$props3.tabBar,tabBar=_this$props3$tabBar===void 0?function(props){return React.createElement(_BottomTabBar.default,(0,_extends2.default)({},props,{__source:{fileName:_jsxFileName,lineNumber:175}}));}:_this$props3$tabBar,tabBarOptions=_this$props3.tabBarOptions,state=_this$props3.state,navigation=_this$props3.navigation;var descriptors=_this.props.descriptors;var route=state.routes[state.index];var descriptor=descriptors[route.key];var options=descriptor.options;if(options.tabBarVisible===false){return null;}return tabBar(_objectSpread({},tabBarOptions,{state:state,descriptors:descriptors,navigation:navigation,onTabPress:_this.handleTabPress,onTabLongPress:_this.handleTabLongPress,getLabelText:_this.getLabelText,getAccessibilityLabel:_this.getAccessibilityLabel,getAccessibilityRole:_this.getAccessibilityRole,getAccessibilityStates:_this.getAccessibilityStates,getTestID:_this.getTestID,renderButton:_this.renderButton,renderIcon:_this.renderIcon}));};return _this;}(0,_createClass2.default)(BottomTabView,[{key:"render",value:function render(){var _this$props4=this.props,state=_this$props4.state,descriptors=_this$props4.descriptors,lazy=_this$props4.lazy,unmountInactiveScreens=_this$props4.unmountInactiveScreens;var routes=state.routes;var loaded=this.state.loaded;return React.createElement(_SafeAreaProviderCompat.default,{__source:{fileName:_jsxFileName,lineNumber:213}},React.createElement(_reactNative.View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:214}},React.createElement(_reactNativeScreens.ScreenContainer,{style:styles.pages,__source:{fileName:_jsxFileName,lineNumber:215}},routes.map(function(route,index){if(unmountInactiveScreens&&index!==state.index){return null;}if(lazy&&!loaded.includes(index)){return null;}var isFocused=state.index===index;return React.createElement(_ResourceSavingScene.default,{key:route.key,style:_reactNative.StyleSheet.absoluteFill,isVisible:isFocused,__source:{fileName:_jsxFileName,lineNumber:229}},React.createElement(_reactNative.View,{accessibilityElementsHidden:!isFocused,importantForAccessibility:isFocused?'auto':'no-hide-descendants',style:styles.content,__source:{fileName:_jsxFileName,lineNumber:234}},descriptors[route.key].render()));})),this.renderTabBar()));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var index=nextProps.state.index;return{loaded:prevState.loaded.includes(index)?prevState.loaded:[].concat((0,_toConsumableArray2.default)(prevState.loaded),[index])};}}]);return BottomTabView;}(React.Component);exports.default=BottomTabView;BottomTabView.defaultProps={lazy:true};var styles=_reactNative.StyleSheet.create({container:{flex:1,overflow:'hidden'},pages:{flex:1},content:{flex:1}});
//# sourceMappingURL=BottomTabView.js.map