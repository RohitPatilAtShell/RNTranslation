{"version":3,"sources":["PointerEventsView.tsx"],"names":["React","View","Animated","MIN_PROGRESS","TRUE","FALSE","NOOP","block","greaterThan","cond","set","call","onChange","PointerEventsView","pointerEventsEnabled","Value","props","active","exec","progress","value","setPointerEventsEnabled","Boolean","enabled","pointerEvents","root","setNativeProps","prevProps","setValue","rest","c","Component"],"mappings":"opBAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAASC,IAAT,KAAgC,cAAhC,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CAUA,GAAMC,CAAAA,YAAY,CAAG,IAArB,CAEA,GAAMC,CAAAA,IAAI,CAAG,CAAb,CACA,GAAMC,CAAAA,KAAK,CAAG,CAAd,CACA,GAAMC,CAAAA,IAAI,CAAG,CAAb,C,GAEQC,CAAAA,K,CAAkDL,Q,CAAlDK,K,CAAOC,W,CAA2CN,Q,CAA3CM,W,CAAaC,I,CAA8BP,Q,CAA9BO,I,CAAMC,G,CAAwBR,Q,CAAxBQ,G,CAAKC,I,CAAmBT,Q,CAAnBS,I,CAAMC,Q,CAAaV,Q,CAAbU,Q,IAMxBC,CAAAA,iB,0aAQXC,oB,CAAuB,GAAIZ,CAAAA,QAAQ,CAACa,KAAb,CAC7B,MAAKC,KAAL,CAAWC,MAAX,CAAoBb,IAApB,CAA2BC,KADE,C,OAIvBa,I,CAAOX,KAAK,CAAC,CACnBE,IAAI,CACFD,WAAW,CAAC,MAAKQ,KAAL,CAAWG,QAAZ,CAAsBhB,YAAtB,CADT,CAEFM,IAAI,CACF,MAAKK,oBADH,CAEFR,IAFE,CAGFI,GAAG,CAAC,MAAKI,oBAAN,CAA4BV,IAA5B,CAHD,CAFF,CAOFK,IAAI,CAAC,MAAKK,oBAAN,CAA4BJ,GAAG,CAAC,MAAKI,oBAAN,CAA4BT,KAA5B,CAA/B,CAPF,CADe,CAUnBO,QAAQ,CACN,MAAKE,oBADC,CAENH,IAAI,CAAC,CAAC,MAAKG,oBAAN,CAAD,CAA8B,cAAa,kCAAXM,KAAW,UAC7C,MAAKC,uBAAL,CAA6BC,OAAO,CAAC,MAAKN,KAAL,CAAWC,MAAX,EAAqBG,KAAtB,CAApC,EACD,CAFG,CAFE,CAVW,CAAD,C,OAkBZC,uB,CAA0B,SAACE,OAAD,CAAsB,CACtD,GAAMC,CAAAA,aAAa,CAAGD,OAAO,CAAG,UAAH,CAAgB,MAA7C,CAEA,MAAKE,IAAL,EAAa,MAAKA,IAAL,CAAUC,cAAV,CAAyB,CAAEF,aAAa,CAAbA,aAAF,CAAzB,CAAb,CACD,C,OAEOC,I,CAAoB,I,2GAnCTE,S,CAAkB,CACnC,GAAI,KAAKX,KAAL,CAAWC,MAAX,GAAsBU,SAAS,CAACV,MAApC,CAA4C,CAC1C,KAAKH,oBAAL,CAA0Bc,QAA1B,CAAmC,KAAKZ,KAAL,CAAWC,MAAX,CAAoBb,IAApB,CAA2BC,KAA9D,EACA,KAAKgB,uBAAL,CAA6B,KAAKL,KAAL,CAAWC,MAAxC,EACD,CACF,C,uCAgCQ,iCAE+B,KAAKD,KAFpC,CAECC,MAFD,aAECA,MAFD,CAESE,QAFT,aAESA,QAFT,CAEsBU,IAFtB,6DAIP,MACE,qBAAC,KAAD,CAAO,QAAP,kDACE,oBAAC,QAAD,CAAU,IAAV,EAAe,IAAI,CAAE,KAAKX,IAA1B,iDADF,CAEE,oBAAC,IAAD,WAAM,GAAG,CAAE,aAAAY,CAAC,QAAK,CAAA,MAAI,CAACL,IAAL,CAAYK,CAAjB,EAAZ,EAAqCD,IAArC,mDAFF,CADF,CAMD,C,+BAhD4C7B,KAAK,CAAC+B,S,SAAhClB,iB","sourcesContent":["import * as React from 'react';\nimport { View, ViewProps } from 'react-native';\nimport Animated from 'react-native-reanimated';\n\ntype Binary = 0 | 1;\n\ntype Props = ViewProps & {\n  active: boolean;\n  progress: Animated.Node<number>;\n  children: React.ReactNode;\n};\n\nconst MIN_PROGRESS = 0.99;\n\nconst TRUE = 1;\nconst FALSE = 0;\nconst NOOP = 0;\n\nconst { block, greaterThan, cond, set, call, onChange } = Animated;\n\n/**\n * Component that automatically computes the `pointerEvents` property\n * whenever position changes.\n */\nexport default class PointerEventsView extends React.Component<Props> {\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.active !== prevProps.active) {\n      this.pointerEventsEnabled.setValue(this.props.active ? TRUE : FALSE);\n      this.setPointerEventsEnabled(this.props.active);\n    }\n  }\n\n  private pointerEventsEnabled = new Animated.Value<Binary>(\n    this.props.active ? TRUE : FALSE\n  );\n\n  private exec = block([\n    cond(\n      greaterThan(this.props.progress, MIN_PROGRESS),\n      cond(\n        this.pointerEventsEnabled,\n        NOOP,\n        set(this.pointerEventsEnabled, TRUE)\n      ),\n      cond(this.pointerEventsEnabled, set(this.pointerEventsEnabled, FALSE))\n    ),\n    onChange(\n      this.pointerEventsEnabled,\n      call([this.pointerEventsEnabled], ([value]) => {\n        this.setPointerEventsEnabled(Boolean(this.props.active && value));\n      })\n    ),\n  ]);\n\n  private setPointerEventsEnabled = (enabled: boolean) => {\n    const pointerEvents = enabled ? 'box-none' : 'none';\n\n    this.root && this.root.setNativeProps({ pointerEvents });\n  };\n\n  private root: View | null = null;\n\n  render() {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { active, progress, ...rest } = this.props;\n\n    return (\n      <React.Fragment>\n        <Animated.Code exec={this.exec} />\n        <View ref={c => (this.root = c)} {...rest} />\n      </React.Fragment>\n    );\n  }\n}\n"]}